import{_ as B,u as V,r,c as i,o as E,s as O,a as x,w as I,M as U,b as l,d as t,e as k,v as $,f as n,h as m,n as y,m as d,t as C,F as b,p as M,j as w,x as q}from"./index-Du2ixtSa.js";const z={class:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white relative overflow-hidden"},P={class:"container mx-auto px-4 py-16 relative"},Q={class:"max-w-2xl mx-auto"},G={class:"relative"},H={class:"container mx-auto px-4 py-12"},J={class:"mb-12"},K={class:"flex flex-wrap gap-4 justify-center"},R=["onClick"],W={key:0,class:"mb-12"},X={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Y={class:"flex items-center justify-between mb-6"},Z={class:"section-title mb-0"},ee={class:"flex items-center gap-4"},te={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},se={key:0,class:"text-center py-12"},ae={key:1,class:"text-center mt-12"},le=["disabled"],ne={key:0},oe={key:1},re={__name:"SpecialOffers",setup(ie){const h=V(),f=r(""),o=r("all"),p=r("newest"),u=r([]),v=r(1),c=r(!1),g=[{label:"All Offers",value:"all",icon:"fa-tags"},{label:"Trending",value:"trending",icon:"fa-fire"},{label:"Ending Soon",value:"ending",icon:"fa-clock"},{label:"New Arrivals",value:"new",icon:"fa-star"}],S=i(()=>{const s=g.find(e=>e.value===o.value);return s?s.icon:"fa-tags"}),L=i(()=>{const s=g.find(e=>e.value===o.value);return s?s.label:"All Offers"}),F=i(()=>u.value.filter(s=>s.isSpecial).slice(0,3)),_=i(()=>{let s=u.value;if(f.value){const e=f.value.toLowerCase();s=s.filter(a=>a.description.toLowerCase().includes(e)||a.brand.name.toLowerCase().includes(e))}return o.value!=="all"&&(s=s.filter(e=>{switch(o.value){case"trending":return e.isTrending;case"ending":return Math.ceil((new Date(e.expiryDate)-new Date)/(1e3*60*60*24))<=7;case"new":return Math.ceil((new Date-new Date(e.createdAt))/(1e3*60*60*24))<=7;default:return!0}})),s}),D=i(()=>[..._.value].sort((s,e)=>{switch(p.value){case"expiring":return new Date(s.expiryDate)-new Date(e.expiryDate);case"popular":return(e.usageCount||0)-(s.usageCount||0);default:return new Date(e.createdAt||e.expiryDate)-new Date(s.createdAt||s.expiryDate)}})),T=i(()=>_.value.length>v.value*12),A=()=>{v.value=1},N=async()=>{if(!c.value)try{c.value=!0,v.value++;const s=await O(v.value);u.value=[...u.value,...s]}catch{h.error("Failed to load more offers")}finally{c.value=!1}};return E(async()=>{try{const s=await O();u.value=s}catch{h.error("Failed to load offers")}}),(s,e)=>(l(),x(U,null,{default:I(()=>[t("div",z,[e[5]||(e[5]=t("div",{class:"absolute inset-0 bg-grid-white/[0.1] bg-grid-8"},null,-1)),t("div",P,[e[3]||(e[3]=t("h1",{class:"text-4xl md:text-5xl font-bold text-center mb-6 animate-fade-in"}," Special Offers & Deals ",-1)),e[4]||(e[4]=t("p",{class:"text-xl text-center mb-12 text-blue-100 max-w-2xl mx-auto"}," Discover exclusive discounts and limited-time offers from your favorite brands ",-1)),t("div",Q,[t("div",G,[k(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>f.value=a),type:"text",placeholder:"Search special offers...",class:"w-full px-6 py-4 rounded-full text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-300 text-lg",onInput:A},null,544),[[$,f.value]]),e[2]||(e[2]=t("i",{class:"fas fa-search absolute right-6 top-1/2 -translate-y-1/2 text-gray-400"},null,-1))])])])]),t("div",H,[t("section",J,[t("div",K,[(l(),n(b,null,m(g,a=>t("button",{key:a.value,class:y(["px-6 py-3 rounded-full bg-white shadow-sm hover:shadow-md transition-all text-gray-600 hover:text-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-300 flex items-center gap-2",{"bg-blue-50 text-blue-600":o.value===a.value}]),onClick:j=>o.value=a.value},[t("i",{class:y(["fas",a.icon])},null,2),d(" "+C(a.label),1)],10,R)),64))])]),o.value==="all"?(l(),n("section",W,[e[6]||(e[6]=t("div",{class:"flex items-center justify-between mb-6"},[t("h2",{class:"section-title mb-0"},[t("i",{class:"fas fa-fire text-orange-500"}),d(" Featured Deals ")])],-1)),t("div",X,[(l(!0),n(b,null,m(F.value,a=>(l(),x(M,{key:a.id,coupon:a},null,8,["coupon"]))),128))])])):w("",!0),t("section",null,[t("div",Y,[t("h2",Z,[t("i",{class:y(["fas",S.value,"text-blue-500"])},null,2),d(" "+C(L.value),1)]),t("div",ee,[k(t("select",{"onUpdate:modelValue":e[1]||(e[1]=a=>p.value=a),class:"px-4 py-2 rounded-lg bg-white border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-300"},e[7]||(e[7]=[t("option",{value:"newest"},"Newest First",-1),t("option",{value:"expiring"},"Expiring Soon",-1),t("option",{value:"popular"},"Most Popular",-1)]),512),[[q,p.value]])])]),t("div",te,[(l(!0),n(b,null,m(D.value,a=>(l(),x(M,{key:a.id,coupon:a},null,8,["coupon"]))),128))]),D.value.length===0?(l(),n("div",se,e[8]||(e[8]=[t("div",{class:"text-gray-400 text-6xl mb-4"},[t("i",{class:"fas fa-search"})],-1),t("h3",{class:"text-xl font-semibold text-gray-700 mb-2"},"No Offers Found",-1),t("p",{class:"text-gray-500"},"Try adjusting your search or filter criteria",-1)]))):w("",!0),T.value?(l(),n("div",ae,[t("button",{onClick:N,class:"btn-primary px-8 py-3 flex items-center gap-2 mx-auto",disabled:c.value},[c.value?(l(),n("span",ne,e[9]||(e[9]=[t("i",{class:"fas fa-spinner fa-spin"},null,-1),d(" Loading... ")]))):(l(),n("span",oe,e[10]||(e[10]=[d(" Load More Offers "),t("i",{class:"fas fa-chevron-down"},null,-1)])))],8,le)])):w("",!0)])])]),_:1}))}},ce=B(re,[["__scopeId","data-v-d61d9140"]]);export{ce as default};
